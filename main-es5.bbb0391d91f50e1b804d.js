function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{0:function(e,t,n){e.exports=n("2v48")},"2v48":function(e,t,n){"use strict";n.r(t);var r,o,a,i,u=n("fXoL"),c=n("3Pt+"),s=n("jhN1"),l=n("R1ws"),f=n("NZHw"),d=((r=function(){function e(t,n){_classCallCheck(this,e),this.accessor=t,this.injector=n}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{ngModule:e,providers:[f.b,f.c,f.d].concat(_toConsumableArray(t))}}}]),e}()).\u0275mod=u.Nb({type:r}),r.\u0275inj=u.Mb({factory:function(e){return new(e||r)(u.Zb(f.b,2),u.Zb(f.c,2))}}),r),p=n("Tfvs"),v=n("ty+z"),y=n("/wON"),h=n("AcyG"),b=n("tyNb"),g=((o=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:o}),o.\u0275inj=u.Mb({factory:function(e){return new(e||o)},imports:[[b.b.forRoot([{path:"",redirectTo:"count",pathMatch:"full"},{path:"count",loadChildren:function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"iBbY")).then((function(e){return e.CountModule}))}},{path:"todo",loadChildren:function(){return Promise.all([n.e(0),n.e(2),n.e(13)]).then(n.bind(null,"BX/J")).then((function(e){return e.TodoModule}))}},{path:"person",loadChildren:function(){return Promise.all([n.e(0),n.e(3),n.e(12)]).then(n.bind(null,"rAEy")).then((function(e){return e.PersonModule}))}},{path:"amount",loadChildren:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"h86J")).then((function(e){return e.AmountModule}))}},{path:"article",loadChildren:function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(10)]).then(n.bind(null,"BVaH")).then((function(e){return e.ArticleModule}))}}],{useHash:!0})],b.b]}),o),m=n("ofXK"),_=function(){return["count"]},S=function(){return["todo"]},k=function(){return["person"]},O=function(){return["amount"]},w=function(){return["article"]},x=((i=function(){function e(t){_classCallCheck(this,e),this.store=t,this.snapshot=this.store.select((function(e){return e}))}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("[isDevMode]",Object(u.Y)())}}]),e}()).\u0275fac=function(e){return new(e||i)(u.Pb(h.g))},i.\u0275cmp=u.Jb({type:i,selectors:[["app-root"]],decls:72,vars:15,consts:[[1,"panel"],["src","https://habrastorage.org/webt/k7/ih/pc/k7ihpcg6w-jz-rzksmiyuip5_so.png",1,"logo"],[1,"panel-content"],[1,"menu"],[1,"menu-top"],["href","https://github.com/ngxs-labs/data/tree/master/docs","target","_blank",1,"link"],["href","https://stackblitz.io/github/ngxs-labs/data","target","_blank",1,"link"],[1,"ng-icon"],["src","https://cdn.worldvectorlogo.com/logos/angular-icon-1.svg",1,"img"],[1,"link",3,"routerLink"],[1,"container"],[1,"content"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.vc(1,"\n    "),u.Qb(2,"img",1),u.vc(3,"\n\n    "),u.Vb(4,"div",2),u.vc(5,"\n        "),u.Vb(6,"h2"),u.vc(7,"Store:"),u.Ub(),u.vc(8,"\n        "),u.Vb(9,"pre"),u.vc(10),u.gc(11,"json"),u.gc(12,"async"),u.Ub(),u.vc(13,"\n    "),u.Ub(),u.vc(14,"\n"),u.Ub(),u.vc(15,"\n\n"),u.Vb(16,"div",3),u.vc(17,"\n    "),u.Vb(18,"div",4),u.vc(19,"\n        "),u.Vb(20,"span"),u.vc(21,"\n            \ud83e\uddfe\n            "),u.Vb(22,"a",5),u.vc(23,"\n                Official documentation\n            "),u.Ub(),u.vc(24,"\n        "),u.Ub(),u.vc(25,"\n        "),u.Vb(26,"span"),u.vc(27,"\n            \ud83d\ude80 "),u.Vb(28,"a",6),u.vc(29,"Stackblitz"),u.Ub(),u.vc(30,"\n        "),u.Ub(),u.vc(31,"\n        "),u.Vb(32,"span",7),u.vc(33,"\n            "),u.Qb(34,"img",8),u.vc(35,"\n            Angular 8+, NGXS 3.6.2+\n        "),u.Ub(),u.vc(36,"\n    "),u.Ub(),u.vc(37,"\n\n    "),u.Vb(38,"span"),u.vc(39,"\ud83c\udfc0 "),u.Vb(40,"a",9),u.vc(41,"CountState"),u.Ub(),u.Ub(),u.vc(42,"\n    "),u.Vb(43,"span"),u.vc(44,"\ud83e\udded "),u.Vb(45,"a",9),u.vc(46,"TodoState"),u.Ub(),u.Ub(),u.vc(47,"\n    "),u.Vb(48,"span"),u.vc(49,"\ud83d\ude0b "),u.Vb(50,"a",9),u.vc(51,"PersonState"),u.Ub(),u.Ub(),u.vc(52,"\n    "),u.Vb(53,"span"),u.vc(54,"\ud83d\udcb0 "),u.Vb(55,"a",9),u.vc(56,"AmountState"),u.Ub(),u.Ub(),u.vc(57,"\n    "),u.Vb(58,"span"),u.vc(59,"\ud83d\udccb "),u.Vb(60,"a",9),u.vc(61,"ArticleEntitiesState"),u.Ub(),u.Ub(),u.vc(62,"\n"),u.Ub(),u.vc(63,"\n\n"),u.Qb(64,"br"),u.vc(65,"\n\n"),u.Vb(66,"div",10),u.vc(67,"\n    "),u.Vb(68,"div",11),u.Qb(69,"router-outlet"),u.Ub(),u.vc(70,"\n"),u.Ub(),u.vc(71,"\n")),2&e&&(u.Eb(10),u.wc(u.hc(11,6,u.hc(12,8,t.snapshot))),u.Eb(30),u.kc("routerLink",u.lc(10,_)),u.Eb(5),u.kc("routerLink",u.lc(11,S)),u.Eb(5),u.kc("routerLink",u.lc(12,k)),u.Eb(5),u.kc("routerLink",u.lc(13,O)),u.Eb(5),u.kc("routerLink",u.lc(14,w)))},directives:[b.a,b.c],pipes:[m.f,m.b],encapsulation:2,changeDetection:0}),i),C=((a=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:a,bootstrap:[x]}),a.\u0275inj=u.Mb({factory:function(e){return new(e||a)},providers:[],imports:[[s.a,c.e,g,l.b,c.k,h.c.forRoot([],{developmentMode:!1,executionStrategy:h.d}),y.a.forRoot(),d.forRoot([p.b,p.a]),v.a]]}),a);Object(u.U)(),s.d().bootstrapModule(C).catch((function(e){return console.error(e)}))},"BS/u":function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="BS/u"},NZHw:function(e,t,n){"use strict";function r(e){return"undefined"!==e&&null!=e}function o(e){return!r(e)}function a(e){return JSON.parse(JSON.stringify(void 0===e?{}:e))}function i(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function u(e){return e.NGXS_OPTIONS_META||{name:""}}n.d(t,"u",(function(){return r})),n.d(t,"v",(function(){return o})),n.d(t,"l",(function(){return a})),n.d(t,"w",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"q",(function(){return p})),n.d(t,"s",(function(){return v})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return I})),n.d(t,"k",(function(){return A})),n.d(t,"y",(function(){return M})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return P})),n.d(t,"o",(function(){return z})),n.d(t,"z",(function(){return U})),n.d(t,"n",(function(){return B})),n.d(t,"r",(function(){return L})),n.d(t,"m",(function(){return F})),n.d(t,"p",(function(){return X})),n.d(t,"t",(function(){return Z})),n.d(t,"x",(function(){return H}));var c=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"Child states can only be added to an object. Cannot convert ".concat(e&&e.constructor?e.constructor.name:e," to PlainObject"))}return n}();function s(e){var t=u(e),n=t.children||[],r=a(t.defaults);if(n.length){if(i(r))return function(e,t){return t.reduce((function(e,t){var n=u(t);if(!n.name)throw new Error("State name not provided in class");return e[n.name.toString()]=s(t),e}),e)}(r,n);throw new c(r)}return r}function l(e){for(var t=e.statePath,n=e.argumentsNames,r=e.methodName,o=e.argumentRegistry,a="",i=0;i<n.length;i++)(null==o?void 0:o.getArgumentNameByIndex(i))?a+=null==o?void 0:o.getArgumentNameByIndex(i):(null==o?void 0:o.getPayloadTypeByIndex(i))?a+=null==o?void 0:o.getPayloadTypeByIndex(i):a+="$arg"+i,i!==n.length-1&&(a+=", ");return"@".concat(t.replace(/\./g,"/"),".").concat(r,"(").concat(a,")")}function f(e){return(e+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)}var d=n("UFJs");function p(e){if(!e.hasOwnProperty(d.e)){var t={name:null,actions:{},defaults:{},path:null,makeRootSelector:function(e){return e.getStateGetter(t.name)},children:[]};Object.defineProperty(e,d.e,{value:t})}return function(e){return e[d.e]}(e)}function v(e){return e[d.c]}var y,h,b,g=function e(t){var n=t instanceof Date;if("object"!=typeof t||null===t||n)return t;Object.freeze(t);var r="function"==typeof t,o=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach((function(n){!o.call(t,n)||r&&("caller"===n||"callee"===n||"arguments"===n)||null===t[n]||"object"!=typeof t[n]&&"function"!=typeof t[n]||Object.isFrozen(t[n])||e(t[n])})),t},m=n("fXoL"),_=n("AcyG"),S=n("z5Zb"),k=n("2Vo4"),O=((b=function(){function e(t){var n=this;_classCallCheck(this,e),this.sequence$=new k.a(0),this.subscription=null,t&&(this.subscription=t.subscribe((function(){return n.updateSequence()})))}return _createClass(e,[{key:"ngOnDestroy",value:function(){var e;this.sequence$.next(0),null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"updateSequence",value:function(){this.sequence$.next(this.sequenceValue+1)}},{key:"sequenceValue",get:function(){return this.sequence$.getValue()}}]),e}()).\u0275fac=function(e){return new(e||b)(m.Zb(_.g,8))},b.\u0275prov=m.Lb({token:b,factory:b.\u0275fac}),b),w=((h=function e(t,n,r){_classCallCheck(this,e),e.store=t.get(_.g),e.ngZone=t.get(m.B),e.factory=n,e.context=r,e.computed=t.get(O)}).store=null,h.computed=null,h.context=null,h.factory=null,h.ngZone=null,h.\u0275fac=function(e){return new(e||h)(m.Zb(m.t),m.Zb(S.d),m.Zb(S.c))},h.\u0275prov=m.Lb({token:h,factory:h.\u0275fac}),h),x=((y=function(){function e(){_classCallCheck(this,e),e.statesCachedMeta.clear()}return _createClass(e,null,[{key:"createStateContext",value:function(e){return w.context.createStateContext(e)}},{key:"ensureMappedState",value:function(t){if(!w.factory||!t)throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(t.name?e.statesCachedMeta.get(t.name):null)||e.ensureMeta(t)}},{key:"getRepositoryByInstance",value:function(t){var n=v(e.getStateClassByInstance(t))||null;if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return n}},{key:"getStateClassByInstance",value:function(e){return(e||{}).constructor}},{key:"clearMetaByInstance",value:function(t){var n=e.getRepositoryByInstance(t);n.stateMeta.actions={},n.operations={}}},{key:"createPayload",value:function(e,t){for(var n={},r=Array.from(e),o=0;o<r.length;o++)(null==t?void 0:t.getPayloadTypeByIndex(o))&&(n[null==t?void 0:t.getPayloadTypeByIndex(o)]=r[o]);return Object.keys(n).length>0?n:null}},{key:"createAction",value:function(t,n,r){var o,a=e.createPayload(n,r);return new(o=t.type,function(){function e(t){var n=this;_classCallCheck(this,e),t&&Object.keys(t).forEach((function(e){n[e]=t[e]}))}return _createClass(e,null,[{key:"type",get:function(){return o}}]),e}())(a)}},{key:"ensureMeta",value:function(t){var n,r=t.name?null===(n=w.factory.states)||void 0===n?void 0:n.find((function(e){return e.name===t.name})):null;return r&&t.name&&e.statesCachedMeta.set(t.name,r),r}}]),e}()).statesCachedMeta=new Map,y.\u0275fac=function(e){return new(e||y)},y.\u0275prov=m.Lb({token:y,factory:y.\u0275fac}),y);function C(e){return{enumerable:!0,configurable:!0,get:function(){var t=v(e),n=x.ensureMappedState(t.stateMeta);return x.createStateContext(n)}}}function I(e,t){(function(e){var t,n=null!==(t=v(e))&&void 0!==t?t:null;return(!n||(null==n?void 0:n.stateClass)!==e)&&function(e){Object.defineProperty(e,d.c,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:e}})}(e),v(e)}(e)).stateMeta=t}var j=n("lJxs"),E=n("UXun");function A(e){var t=v(e),n=t.stateMeta&&t.stateMeta.name||null;if(n){var r,o="__".concat(n,"__selector");Object.defineProperties(e.prototype,(_defineProperty(r={},o,{writable:!0,enumerable:!1,configurable:!0}),_defineProperty(r,"state$",{enumerable:!0,configurable:!0,get:function(){if(this[o])return this[o];if(!w.store)throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[o]=w.store.select(e).pipe(Object(j.a)((function(e){return Object(m.Y)()?g(e):e})),Object(E.a)({refCount:!0,bufferSize:1})),this[o]}}),r))}}function M(e,t){if(e.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===t)throw new Error("@DataAction() can only decorate a method implementation")}function N(){if(!w.ngZone)throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!")}var T=n("cp0P");function P(e,t){return Object(T.a)([e,t]).pipe(Object(j.a)((function(e){return e.pop()})))}var D=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,"An argument with the name '".concat(e,"' already exists in the method '").concat(r,"'"))}return n}(),R=function(){function e(){_classCallCheck(this,e),this.payloadMap=new Map,this.argumentMap=new Map}return _createClass(e,[{key:"getPayloadTypeByIndex",value:function(e){var t;return null!==(t=this.payloadMap.get(e))&&void 0!==t?t:null}},{key:"getArgumentNameByIndex",value:function(e){var t;return null!==(t=this.argumentMap.get(e))&&void 0!==t?t:null}},{key:"createPayloadType",value:function(e,t,n){this.checkDuplicateName(e,t),this.payloadMap.set(n,e),this.payloadMap.set(e,e)}},{key:"createArgumentName",value:function(e,t,n){this.checkDuplicateName(e,t),this.argumentMap.set(n,e),this.argumentMap.set(e,e)}},{key:"checkDuplicateName",value:function(e,t){if(this.argumentMap.has(e)||this.payloadMap.has(e))throw new D(e,t)}}]),e}();function L(e){return e[d.a]}function z(e,t){var n=e[t];return L(n)||Object.defineProperties(n,_defineProperty({},d.a,{enumerable:!0,configurable:!0,value:new R})),L(n)}function U(e,t){var n;if(!(null===(n=Object.getOwnPropertyDescriptor(e,t))||void 0===n?void 0:n.get))throw new Error("The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ".concat(t.toString(),"() { \n\t .. \n}"))}function B(e){if(!e)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},e),{getState:function(){return Object(m.Y)()?g(e.getState()):e.getState()},setState:function(t){e.setState(t)},patchState:function(t){e.patchState(t)}})}function V(){return"__".concat(d.b,"__")}function G(e){var t;return null!==(t=e[V()])&&void 0!==t?t:null}function F(e){return G(e)||Object.defineProperties(e,_defineProperty({},V(),{enumerable:!0,configurable:!0,value:new WeakMap})),G(e)}function X(e){return Object(m.Y)()?g(e):e}function Z(){var e,t;return null!==(t=null===(e=null==w?void 0:w.computed)||void 0===e?void 0:e.sequenceValue)&&void 0!==t?t:0}var J=n("7+OI");function H(e){var t=!1;return Object(J.a)(e)&&(t=!0),t}},Tfvs:function(e,t,n){"use strict";n.d(t,"d",(function(){return P})),n.d(t,"c",(function(){return D})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return i}));var r=n("fXoL"),o=new r.s("NGXS_DATA_STORAGE_CONTAINER_TOKEN"),a=function(){function e(){_classCallCheck(this,e),this.providers=new Set,this.keys=new Map}return _createClass(e,[{key:"getProvidedKeys",value:function(){return Array.from(this.keys.keys())}}]),e}(),i={provide:o,useFactory:function(){return new a}},u=new r.s("NGXS_DATA_STORAGE_DECODE_TYPE_TOKEN"),c=n("AcyG"),s=n("ofXK"),l=n("NZHw"),f=n("UFJs"),d=(n("i2FL"),n("xgIS")),p=n("vkgz");function v(e){return-1!==e.ttl&&!isNaN(e.ttl)&&e.ttl>0}function y(e){return Date.now()>=e.getTime()}var h=n("l5mm");function b(e){return"".concat(e.prefixKey).concat(e.path)}function g(e,t){var n,r,o,a=t.provider,i={key:e,expiry:t.expiry.toISOString(),timestamp:new Date(Date.now()).toISOString()},u=a.stateInstance;null===(n=null==u?void 0:u.expired$)||void 0===n||n.next(i),(null==u?void 0:u.ngxsDataAfterExpired)&&(l.c.ngZone?null===(r=l.c.ngZone)||void 0===r||r.run((function(){var e;return null===(e=null==u?void 0:u.ngxsDataAfterExpired)||void 0===e?void 0:e.call(u,i,a)})):null===(o=null==u?void 0:u.ngxsDataAfterExpired)||void 0===o||o.call(u,i,a))}var m=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"".concat(e,". \nIncorrect structure for deserialization!!! Your structure should be like this: \n").concat(JSON.stringify({lastChanged:"2020-01-01T12:00:00.000Z",data:"{}",version:1},null,4)))}return n}();function _(e){try{return JSON.parse(e)}catch(t){throw new m(t.message)}}function S(e){var t,n,r=e.provider,o=e.map;null===(t=o.get(r))||void 0===t||t.subscription.unsubscribe();var a=function(){var t=new Date(Date.now()).toISOString(),n=Object(h.a)(r.ttlDelay).subscribe((function(){return function(e,t,n){var r=t.provider,o=t.expiry,a=t.map,i=t.engine,u=b(r),c=i.getItem(u);if(c){if(y(o)){var s=new Date(Date.now()).toISOString();!function(e,t,n){var r=n.provider,o=n.engine;switch(r.ttlExpiredStrategy){case 0:o.removeItem(e);break;case 1:var a=_(t);a.data=null,o.setItem(e,JSON.stringify(a))}}(u,c,t),g(u,t),n.unsubscribe(),a.set(r,{subscription:n,startListen:e,endListen:s})}}else n.unsubscribe()}(t,e,n)}));o.set(r,{subscription:n,startListen:t,endListen:null})};l.c.ngZone?null===(n=l.c.ngZone)||void 0===n||n.runOutsideAngular((function(){return a()})):a()}var k=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"missing key 'data' or it's value not serializable.")}return n}(),O=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"lastChanged key not found in object ".concat(e,"."))}return n}(),w=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"It's not possible to determine version (".concat(e,"), since it must be a integer type and must equal or more than 1."))}return n}();function x(e,t){var n=Object(l.u)(e)?e:null;return"base64"===t.decode?btoa(JSON.stringify(n)):n}var C=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,"Not found storage engine from `existingEngine` or not found instance after injecting by `useClass`. \nMetadata { key: '".concat(e,"' }"))}return n}(),I=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"StorageEngine instance should be implemented by DataStorageEngine interface")}return n}();function j(e,t){var n=e.existingEngine||t.get(e.useClass,null);if(!n)throw new C(b(e));if(!("getItem"in n))throw new I;return n}function E(e,t){console.warn("Error occurred while serializing value from metadata { key: '".concat(e,"' }. \nError serialize: ").concat(t))}var A,M=((A=function(){function e(t,n){_classCallCheck(this,e),this._platformId=t,e.injector=n,this.listenWindowEvents()}return _createClass(e,[{key:"handle",value:function(e,t,n){var r=this;if(this.skipStorageInterceptions)return n(e,t);var o=function(e){var t=Object(c.i)(e);return t(c.a)||t(c.h)}(t);return n(e=this.pullStateFromStorage(e,{action:t,init:o}),t).pipe(Object(p.a)((function(n){return r.pushStateToStorage(e,n,{action:t,init:o})})))}},{key:"serialize",value:function(t,n){var r={version:n.version,lastChanged:(new Date).toISOString(),data:x(t,n)};if(v(n)){var o=j(n,e.injector),a=new Date(Date.now()+parseInt(n.ttl));S({provider:n,expiry:a,map:this.ttlListeners,engine:o}),r.expiry=a.toISOString()}return JSON.stringify(r)}},{key:"deserialize",value:function(e,t,n){return function(e,t,n){if(Object(l.w)(e)){if(function(e){return!("lastChanged"in e)||!e.lastChanged}(e))throw new O(t);if(function(e){var t=parseFloat(e.version);return isNaN(t)||t<1||parseInt(e.version)!==t}(e))throw new w(e.version);if(function(e){return!("data"in e)}(e))throw new k;return"base64"===n.decode?JSON.parse(atob(e.data)):e.data}throw new m('"'.concat(t,'" not an object'))}(e,t,n)}},{key:"destroyOldTasks",value:function(){var t;null===(t=e.eventsSubscriptions)||void 0===t||t.unsubscribe(),e.ttlListeners=new WeakMap}},{key:"pushStateToStorage",value:function(t,n,r){var o,a=_createForOfIteratorHelper(this.entries);try{for(a.s();!(o=a.n()).done;){var i=_slicedToArray(o.value,1)[0],u=Object(c.k)(t,i.path),s=Object(c.k)(n,i.path),l=i.fireInit&&r.init;if(u!==s||l){var f=j(i,e.injector),d=b(i);try{var p=this.serialize(s,i);f.setItem(d,p),this.keys.set(d)}catch(v){E(d,v.message)}}}}catch(y){a.e(y)}finally{a.f()}}},{key:"pullStateFromStorage",value:function(e,t){var n=t.action,r=t.init;if(this.canBeSyncStoreWithStorage(n,r)){var o,a=_createForOfIteratorHelper(this.entries);try{for(a.s();!(o=a.n()).done;){var i=_slicedToArray(o.value,1)[0];e=this.deserializeByProvider(e,n,i)}}catch(u){a.e(u)}finally{a.f()}}return e}},{key:"canBeSyncStoreWithStorage",value:function(e,t){return this.size>0&&(t||e.type===f.d)}},{key:"deserializeByProvider",value:function(t,n,r){var o=b(r),a=j(r,e.injector),i=a.getItem(o);return Object(l.u)(i)&&(t=this.deserializeHandler(t,{key:o,engine:a,provider:r,value:i,action:n})),t}},{key:"deserializeHandler",value:function(t,n){var r=n.key,o=n.provider,a=n.value;try{var i=_(a),u=this.deserialize(i,a,o),s=function(e){var t=e.data,n=e.provider,r=Object(l.u)(t)||n.nullable,o={canBeOverrideFromStorage:r,versionMismatch:!1,expired:!1,expiry:null};return o=function(e,t,n){var r=n.provider;if(e&&n.meta.version!==r.version){var o=r.stateInstance,a=!(r.skipMigrate||!(null==o?void 0:o.ngxsDataStorageMigrate)&&!r.migrate);t=Object.assign(Object.assign({},t),a?{versionMismatch:!0}:{canBeOverrideFromStorage:!1,versionMismatch:!0})}return t}(r,o=function(e,t,n){var r=n.meta;if(e&&v(n.provider)){var o=new Date(r.expiry);!isNaN(o.getTime())&&(t=y(o)?{canBeOverrideFromStorage:!1,expired:!0,expiry:o,versionMismatch:!1}:{canBeOverrideFromStorage:e,expired:!1,expiry:o,versionMismatch:!1})}return t}(r,o,e),e)}({provider:o,meta:i,data:u});if(s.canBeOverrideFromStorage){var f=function(e){var t,n=e.states,r=e.provider,o=e.data,a=e.info;if(!r.rehydrate)return{states:n,rehydrateIn:!1};var i=Object(c.k)(n,r.path);if(a.versionMismatch){var u=r.stateInstance,s=r.migrate||(null===(t=u.ngxsDataStorageMigrate)||void 0===t?void 0:t.bind(r.stateInstance)),l=null==s?void 0:s(i,o);return{states:n=Object(c.l)(n,r.path,l),rehydrateIn:!0}}return JSON.stringify(i)!==JSON.stringify(o)?{states:n=Object(c.l)(n,r.path,o),rehydrateIn:!0}:{states:n,rehydrateIn:!1}}({states:t,provider:o,data:u,info:s});this.keys.set(r),t=f.states,e.checkIsStorageEvent(n,f,u),e.checkExpiredInit({info:s,rehydrateInfo:f,options:n,map:this.ttlListeners})}else this.removeKeyWhenPullInvalid(s,n)}catch(d){!function(e,t,n){console.warn("Error occurred while deserializing value from metadata { key: '".concat(e,"', value: '").concat(t,"' }. \nError deserialize: ").concat(n))}(r,a,d.message)}return t}},{key:"removeKeyWhenPullInvalid",value:function(e,t){var n=t.key,r=t.engine,o=t.provider;e.expired&&g(n,{provider:o,engine:r,map:this.ttlListeners,expiry:e.expiry}),r.removeItem(n),this.keys.delete(n)}},{key:"listenWindowEvents",value:function(){var t=this;Object(s.r)(this._platformId)||(this.destroyOldTasks(),e.eventsSubscriptions=Object(d.a)(window,"storage").subscribe((function(e){e.key&&t.keys.has(e.key)&&t.store.dispatch({type:f.d})})))}},{key:"store",get:function(){return e.injector.get(c.g,null)}},{key:"size",get:function(){return this.providers.size}},{key:"ttlListeners",get:function(){return e.ttlListeners}},{key:"container",get:function(){return e.injector.get(o)}},{key:"providers",get:function(){return this.container.providers}},{key:"keys",get:function(){return this.container.keys}},{key:"entries",get:function(){return this.providers.entries()}},{key:"skipStorageInterceptions",get:function(){return 0===this.size||Object(s.r)(this._platformId)}}],[{key:"checkIsStorageEvent",value:function(e,t,n){var r,o=e.action,a=e.provider,i=e.key,u=e.value;if(t.rehydrateIn&&function(e){return e.type===f.d}(o)){var c=a.stateInstance;(null==c?void 0:c.ngxsDataAfterStorageEvent)&&(null===(r=null==c?void 0:c.ngxsDataAfterStorageEvent)||void 0===r||r.call(c,{key:i,value:u,data:n,provider:a}))}}},{key:"checkExpiredInit",value:function(e){var t=e.info,n=e.rehydrateInfo,r=e.options,o=e.map,a=r.provider,i=r.engine;n.rehydrateIn&&t.expiry&&S({provider:a,expiry:t.expiry,map:o,engine:i})}}]),e}()).injector=null,A.eventsSubscriptions=null,A.ttlListeners=new WeakMap,A.\u0275fac=function(e){return new(e||A)(r.Zb(r.D),r.Zb(r.t,2))},A.\u0275prov=r.Lb({token:A,factory:A.\u0275fac}),A),N={provide:c.b,useClass:M,multi:!0},T=new r.s("NGXS_DATA_STORAGE_PREFIX_TOKEN");function P(e){var t;try{var n=null===(t=M.injector)||void 0===t?void 0:t.get(o);e.forEach((function(e){n.providers.add(e)}))}catch(r){throw new Error("You forgot provide NGXS_DATA_STORAGE_CONTAINER or NGXS_DATA_STORAGE_EXTENSION!!! Example: \n\n@NgModule({\n imports: [ \n   NgxsDataPluginModule.forRoot([NGXS_DATA_STORAGE_PLUGIN]) \n ]\n})\nexport class AppModule {} \n\n")}}function D(e,t,n){var r,o,a=null===(r=M.injector)||void 0===r?void 0:r.get(T,"@ngxs.store."),i=null===(o=M.injector)||void 0===o?void 0:o.get(u,"none");return n?(Array.isArray(n)?n:[n]).map((function(n){return function(e){var t=e.option,n=e.decodeType,r=e.prefix,o=e.stateInstance;return function(e,t){return"path"in t||(t=Object.assign(Object.assign({},t),{get path(){return e.stateMeta&&e.stateMeta.path}})),t}(e.meta,Object.assign(Object.assign({},t),{ttl:Object(l.u)(t.ttl)?t.ttl:-1,version:Object(l.u)(t.version)?t.version:1,decode:Object(l.u)(t.decode)?t.decode:n,prefixKey:Object(l.u)(t.prefixKey)?t.prefixKey:r,nullable:!!Object(l.u)(t.nullable)&&t.nullable,fireInit:!Object(l.u)(t.fireInit)||t.fireInit,rehydrate:!Object(l.u)(t.rehydrate)||t.rehydrate,ttlDelay:Object(l.u)(t.ttlDelay)?t.ttlDelay:6e4,ttlExpiredStrategy:Object(l.u)(t.ttlExpiredStrategy)?t.ttlExpiredStrategy:0,stateInstance:Object(l.u)(t.stateInstance)?t.stateInstance:o,skipMigrate:!!Object(l.u)(t.skipMigrate)&&t.skipMigrate}))}({option:n,prefix:a,decodeType:i,meta:e,stateInstance:t})})):function(e){var t=e.meta;return[{get path(){return t.stateMeta&&t.stateMeta.path},existingEngine:localStorage,ttl:-1,version:1,decode:e.decodeType,prefixKey:e.prefix,nullable:!1,fireInit:!0,rehydrate:!0,ttlDelay:6e4,ttlExpiredStrategy:0,stateInstance:e.stateInstance,skipMigrate:!1}]}({meta:e,prefix:a,decodeType:i,stateInstance:t})}},UFJs:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var r="NGXS_DATA_STORAGE_EVENT_TYPE",o="NGXS_DATA_META",a="NGXS_META",i="NGXS_ARGUMENT_REGISTRY_META",u="NGXS_COMPUTED_OPTION"},i2FL:function(e,t){},"ty+z":function(e,t,n){"use strict";function r(e){return null!=e?e:{ids:[],entities:{}}}function o(e,t,n){return(null==t?void 0:t[e])>(null==n?void 0:n[e])?1:(null==t?void 0:t[e])<(null==n?void 0:n[e])?-1:0}function a(e,t,n){return(null==t?void 0:t[e])>(null==n?void 0:n[e])?-1:(null==t?void 0:t[e])<(null==n?void 0:n[e])?1:0}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s}));var i,u=n("fXoL"),c=n("ofXK"),s=((i=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:i}),i.\u0275inj=u.Mb({factory:function(e){return new(e||i)},imports:[[c.c]]}),i)}},[[0,1,8]]]);